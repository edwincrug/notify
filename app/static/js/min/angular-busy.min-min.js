angular.module("cgBusy",[]),angular.module("cgBusy").factory("_cgBusyTrackerFactory",["$timeout","$q",function(e,s){return function(){var i={};i.promises=[],i.delayPromise=null,i.durationPromise=null,i.delayJustFinished=!1,i.reset=function(s){i.minDuration=s.minDuration,i.promises=[],angular.forEach(s.promises,function(e){e&&!e.$cgBusyFulfilled&&n(e)}),0!==i.promises.length&&(i.delayJustFinished=!1,s.delay&&(i.delayPromise=e(function(){i.delayPromise=null,i.delayJustFinished=!0},parseInt(s.delay,10))),s.minDuration&&(i.durationPromise=e(function(){i.durationPromise=null},parseInt(s.minDuration,10)+(s.delay?parseInt(s.delay,10):0))))},i.getThen=function(e){var i=e&&(e.then||e.$then||e.$promise&&e.$promise.then);return e.denodeify?s.when(e).then:i};var n=function(e){var s=i.getThen(e);if(!s)throw new Error("cgBusy expects a promise (or something that has a .promise or .$promise");-1===i.promises.indexOf(e)&&(i.promises.push(e),s(function(){e.$cgBusyFulfilled=!0,-1!==i.promises.indexOf(e)&&i.promises.splice(i.promises.indexOf(e),1)},function(){e.$cgBusyFulfilled=!0,-1!==i.promises.indexOf(e)&&i.promises.splice(i.promises.indexOf(e),1)}))};return i.active=function(){return i.delayPromise?!1:i.delayJustFinished?(i.delayJustFinished=!1,i.promises.length>0):i.durationPromise?!0:i.promises.length>0},i}}]),angular.module("cgBusy").value("cgBusyDefaults",{}),angular.module("cgBusy").directive("cgBusy",["$compile","$templateCache","cgBusyDefaults","$http","_cgBusyTrackerFactory",function(e,s,i,n,r){return{restrict:"A",link:function(a,t,o){var l=t.css("position");("static"===l||""===l||"undefined"==typeof l)&&t.css("position","relative");var u,c,d,p,m,g=r(),y={templateUrl:"angular-busy.html",delay:0,minDuration:0,backdrop:!0,message:"Please Wait..."};angular.extend(y,i),a.$watchCollection(o.cgBusy,function(i){if(i||(i={promise:null}),angular.isString(i))throw new Error("Invalid value for cg-busy.  cgBusy no longer accepts string ids to represent promises/trackers.");(angular.isArray(i)||g.getThen(i))&&(i={promise:i}),i=angular.extend(angular.copy(y),i),i.templateUrl||(i.templateUrl=y.templateUrl),angular.isArray(i.promise)||(i.promise=[i.promise]),p||(p=a.$new()),p.$message=i.message,angular.equals(g.promises,i.promise)||g.reset({promises:i.promise,delay:i.delay,minDuration:i.minDuration}),p.$cgBusyIsActive=function(){return g.active()},u&&d===i.templateUrl&&m===i.backdrop||(u&&u.remove(),c&&c.remove(),d=i.templateUrl,m=i.backdrop,n.get(d,{cache:s}).success(function(s){if(i.backdrop="undefined"==typeof i.backdrop?!0:i.backdrop,i.backdrop){var n='<div class="cg-busy cg-busy-backdrop cg-busy-backdrop-animation ng-hide" ng-show="$cgBusyIsActive()"></div>';c=e(n)(p),t.append(c)}var r='<div class="cg-busy cg-busy-animation ng-hide" ng-show="$cgBusyIsActive()">'+s+"</div>";u=e(r)(p),angular.element(u.children()[0]).css("position","absolute").css("top",0).css("left",0).css("right",0).css("bottom",0),t.append(u)}).error(function(e){throw new Error("Template specified for cgBusy ("+i.templateUrl+") could not be loaded. "+e)}))},!0)}}}]),angular.module("cgBusy").run(["$templateCache",function(e){"use strict";e.put("angular-busy.html",'<div class="cg-busy-default-wrapper">\n\n   <div class="cg-busy-default-sign">\n\n      <div class="cg-busy-default-spinner">\n         <div class="bar1"></div>\n         <div class="bar2"></div>\n         <div class="bar3"></div>\n         <div class="bar4"></div>\n         <div class="bar5"></div>\n         <div class="bar6"></div>\n         <div class="bar7"></div>\n         <div class="bar8"></div>\n         <div class="bar9"></div>\n         <div class="bar10"></div>\n         <div class="bar11"></div>\n         <div class="bar12"></div>\n      </div>\n\n      <div class="cg-busy-default-text">{{$message}}</div>\n\n   </div>\n\n</div>')}]);