registrationModule.controller("homeController",function(e,o,a,c,n,t,i,r,l,s){e.newPublicacion=_Publicacion,e.departamento="";var u=function(e,o,a,n){c.error("Ocurrio un problema "+e.message)};e.init=function(){o.empleado=a.get("employeeLogged"),e.empleado=o.empleado,e.departamento=e.empleado.nombreArea+" - "+e.empleado.nombreDepartamento,e.Reload();var c=setInterval(function(){e.Reload()},18e4)};var d=function(o,a,n,t){e.listaPublicaciones=o,c.success("Publicaciones cargadas.")},m=function(o,a,n,t){e.listaAutorizaciones=o,c.success("Autorizaciones cargadas.")},p=function(o,a,n,t){e.listaAgenda=o,c.success("Agenda cargada.")},b=function(o,a,n,t){e.listaRecordatorio=o,c.success("Recordatorios cargados.")},f=function(o,a,n,t){e.listaNotas=o,c.success("Notas cargadas.")},g=function(o,a,n,t){e.listRetencion=o,c.success("Retenciones cargadas.")};e.Reload=function(){s.getPublicaciones(e.empleado.idEmpleado).success(d).error(u),n.getAll(e.empleado.idEmpleado).success(m).error(u),t.getByEmpleado(e.empleado.idEmpleado,(new Date).format("yyyymmdd")).success(p).error(u),i.getByEmpleado(e.empleado.idEmpleado).success(b).error(u),r.getByEmpleado(e.empleado.idEmpleado).success(f).error(u),l.getRetencion().success(g).error(u)},o.RootReload=function(){e.Reload()};var P=function(o,a,n,t){$("#btnPublicar").button("reset"),c.success("Publicaci√≥n guardada, folio: "+o),e.Reload()};e.Publicar=function(){null!=e.newPublicacion.texto&&(e.newPublicacion.idEmpleado=e.empleado.idEmpleado,e.newPublicacion.idSucursal=1,e.newPublicacion.tipo=1,$("#btnPublicar").button("loading"),s.addPublicacion(e.newPublicacion).success(P).error(u))},e.Contactar=function(o){e.listadeClientes=a.get("listadeClientes"),e.cliente=Enumerable.From(e.listadeClientes).Where(function(e){return e.idContrato==o.idContrato}).OrderBy(function(e){return e.idActa}).Select(function(e){return e}).FirstOrDefault(),a.set("clienteActual",e.cliente),location.href="/"}});